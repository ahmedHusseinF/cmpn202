<div class="animated fadeIn">
  <div class="card">
    <div class="card-header">
      <i class="fa fa-user"></i> Create Consumer</div>
    <div class="card-block">
      <form class="form" [formGroup]="consumerForm" novalidate (ngSubmit)="consumer(consumerForm.value,consumerForm.valid)">

        <div>
          <div class="form-group">
            <div class="row">
              <div class="form-group col-md-4">
                <h5>Wallet Information</h5>
              </div>
              <div class="form-group col-md-5">
                <label for="m-number">MSISDN
                  <span class="required aria-required">*</span>
                </label>
                <input type="text" id="m-number" formControlName="mobile_number" class="form-control" maxlength="11" required>
                <div *ngIf="validationErrors?.mobile_number">
                  <span class="alert" *ngFor="let error of validationErrors.mobile_number"> {{error.message}}</span>
                </div>
              </div>
              <div class="form-group col-md-3">
                <button class="btn btn-lg btn-primary" type="button" style="margin-top: 28px;" (click)="search(consumerForm.get('mobile_number').value)">Register</button>
              </div>
              <div *ngIf="mobileNotFound===false" class=" alert alert-danger col-9 ">
                <p>This Mobile Number is already registerd to a different user, please try another one.</p>
              </div>
            </div>
          </div>
        </div>
        <div *ngIf="mobileNotFound===true">
          <div class="form-group">
            <div class="row ">
              <div class="row-line"></div>
              <div class="form-group col-md-4">
                <h5>Consumer Information</h5>
              </div>
              <div class="col-md-8 display-flex-wrap padding-left-0">
                <div class="form-group col-md-6">
                  <label for="fname">First Name
                    <span class="required aria-required">*</span>
                  </label>
                  <input type="text" id="fname" formControlName="fname" class="form-control" required>
                  <div *ngIf="validationErrors?.fname">
                    <span class="alert" *ngFor="let error of validationErrors.fname"> {{error.message}}</span>
                  </div>
                </div>
                <div class="form-group col-md-6">
                  <label for="mname">Middle Name
                    <span class="required aria-required">*</span>
                  </label>
                  <input type="text" id="mname" formControlName="mname" class="form-control" required>
                  <div *ngIf="validationErrors?.mname">
                    <span class="alert" *ngFor="let error of validationErrors.mname"> {{error.message}}</span>
                  </div>
                </div>
                <div class="form-group col-md-6">
                  <label for="lname">Last Name
                    <span class="required aria-required">*</span>
                  </label>
                  <input type="text" id="lname" formControlName="lname" class="form-control" required>
                  <div *ngIf="validationErrors?.lname">
                    <span class="alert" *ngFor="let error of validationErrors.lname"> {{error.message}}</span>
                  </div>
                </div>


                <div class="form-group col-md-6">
                  <label for="national_id">National ID
                    <span class="required aria-required">*</span>
                  </label>
                  <input type="text" id="national_id" maxlength="14" formControlName="national_id" class="form-control" required [(ngModel)]="nationalId"
                    (change)="birth()">
                  <div *ngIf="validationErrors?.national_id">
                    <span class="alert" *ngFor="let error of validationErrors.national_id"> {{error.message}}</span>
                  </div>
                </div>
                <div class="form-group col-md-6">
                  <label for="birthdate">Birth Date
                    <span class="required aria-required">*</span>
                  </label>
                  <input type="text" id="birthdate" disabled [value]="consumerForm.get('birthdate').value" class="form-control" required>
                  <div *ngIf="validationErrors?.birthdate">
                    <span class="alert" *ngFor="let error of validationErrors.birthdate"> {{error.message}}</span>
                  </div>
                </div>
                <div class="form-group col-md-6">
                  <label for="gender">Gender</label>
                  <select formControlName="gender" id="gender" class="form-control">
                    <option value="male">Male</option>
                    <option value="female">Female</option>
                  </select>
                  <div *ngIf="validationErrors?.gender">
                    <span class="alert" *ngFor="let error of validationErrors.gender"> {{error.message}}</span>
                  </div>
                </div>
                <div class="form-group col-md-6">

                  <label for="marital_status">Marital Status</label>
                  <select formControlName="marital_status" id="marital_status" class="form-control">
                    <option value="Single">Single</option>
                    <option value="Married">Married</option>
                  </select>
                  <div *ngIf="validationErrors?.marital_status">
                    <span class="alert" *ngFor="let error of validationErrors.marital_status"> {{error.message}}</span>
                  </div>
                </div>
                <div class="form-group col-md-6">
                  <label for="profile_id ">Wallet User Profile
                    <span class="required aria-required ">*</span>
                  </label>
                  <select formControlName="profile_id" id="profile_id " class="form-control" required>
                    <option *ngFor="let profile of profiles" [ngValue]="profile.id">{{profile.name}}</option>
                  </select>
                  <div *ngIf="validationErrors?.profile_id">
                    <span class="alert" *ngFor="let error of validationErrors.profile_id "> {{error.message}}</span>
                  </div>
                </div>
                <div class="form-group col-md-6">
                  <label for="occupation">Occupation</label>
                  <input type="text " formControlName="occupation" id="occupation " class="form-control ">
                  <div *ngIf="validationErrors?.occupation ">
                    <span class="alert " *ngFor="let error of validationErrors.occupation"> {{error.message}}</span>
                  </div>
                </div>
              </div>
            </div>
          </div>
          <div class="form-group">
            <div class="row">
              <div class="row-line"></div>
              <div class="form-group col-md-4">
                <h5>Contact Information</h5>
              </div>
              <div class="col-md-8 display-flex-wrap padding-left-0">
                <div class="form-group col-md-6">
                  <label for="phone">Phone</label>
                  <input type="text" name="phone" formControlName="phone" id="phone" class="form-control">
                  <div *ngIf="validationErrors?.phone">
                    <span class="alert" *ngFor="let error of validationErrors.phone"> {{error.message}}</span>
                  </div>
                </div>

                <div class="form-group col-md-6">
                  <label for="email">Email</label>
                  <input type="text" name="email" id="email" formControlName="email" class="form-control">
                  <div *ngIf="validationErrors?.email">
                    <span class="alert" *ngFor="let error of validationErrors.email"> {{error.message}}</span>
                  </div>
                </div>

                <div class="form-group col-md-6">
                  <label for="address">Address
                    <span class="required aria-required">*</span>
                  </label>
                  <input type="text" name="address" id="address" formControlName="address" class="form-control" required>
                  <div *ngIf="validationErrors?.address">
                    <span class="alert" *ngFor="let error of validationErrors.address"> {{error.message}}</span>
                  </div>
                </div>

                <div class="form-group col-md-6">
                  <label for="city">City
                    <span class="required aria-required">*</span>
                  </label>
                  <input type="text" name="city" id="city" formControlName="city" class="form-control" required>
                  <div *ngIf="validationErrors?.city">
                    <span class="alert" *ngFor="let error of validationErrors.city"> {{error.message}}</span>
                  </div>
                </div>

                <div class="form-group col-md-6">
                  <label for="serial">Application Serial Number</label>
                  <input type="text" name="serial" id="serial" class="form-control">
                </div>

                <div class="form-group col-md-6">
                  <label for="upload">Upload Image</label>
                  <input #img type="file" accept="image/*" name="image" id="upload" (change)="uploadImage($event)" class="form-control">
                </div>
              </div>
            </div>
          </div>
          <div class="form-group">
            <div class="row">
              <div class="row-line"></div>
              <div class="form-group col-md-4">
                <h5>Notes</h5>
              </div>
              <div class="col-md-8 display-flex-wrap padding-left-0">
                <div class="form-group col-md-12">
                  <textarea formControlName="notes" class="form-control" name="notes " id="notes " rows="6"></textarea>
                  <div *ngIf="validationErrors?.notes">
                    <span class="alert " *ngFor="let error of validationErrors.notes "> {{error.message}}</span>
                  </div>
                </div>
              </div>
            </div>
          </div>
          <div class="form-group">
            <div class="row" style="margin-bottom: 0;">
              <div class="row-line"></div>
              <button type="submit " class="btn btn-lg btn-primary">Create</button>
              <button type="reset" class="btn btn-lg btn-danger">Reset</button>
            </div>
          </div>
        </div>
      </form>

    </div>
  </div>
</div>
